<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<header th:replace="partials/partials-level2.html :: head"></header>
<style>
    .mapboxgl-ctrl-geocoder, .mapboxgl-ctrl-attrib {
    display: none;
    }
</style>
<body>
<div th:if="${!user.isAdmin}">
    <nav th:replace="partials/partials-level2.html :: navbar-member"></nav>
</div>
<div th:if="${user.isAdmin}">
    <nav th:replace="partials/partials-level2.html :: navbar-admin"></nav>
</div>
<div class="container-md">
    <div class="position-absolute top-50 start-50 translate-middle d-flex flex-column align-items-center mt-5">
        <h1 th:text="${reservation.drill.name}"></h1>
        <p>
            <b th:text="${reservation.hotel.name}"></b>
            <br><b>Member: </b><span th:text="${reservation.user.getFullName()}"></span>
            <br><br><b>Location: </b><span th:text="${reservation.hotel.getFullAddress()}"></span>
            <br><br><b>Check-in: </b><span th:text="${reservation.drill.drillStartDate.day - 1}"></span> <span th:text="${reservation.drill.name}"></span> 3:00 PM
            <br><b>Check-out: </b><span th:text="${reservation.drill.drillEndDate.toString().substring(8)}"></span> <span th:text="${reservation.drill.name}"></span> 12:00 PM
<!--            <br><br><a href="#"><img src="/img/icon-schedule.png" width="30px"> <span style="color: black">Add Calendar Event</span></a>-->
        </p>
<!--        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3155.9573069766398!2d-97.2460411715214!3d37.720679958347986!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x87bafd18e4ec23e5%3A0x4ae48ee87695875e!2sHilton%20Garden%20Inn%20Wichita!5e0!3m2!1sen!2sus!4v1670001183186!5m2!1sen!2sus" width="100%" height="350px" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>-->
        <div class="container">
            <div id='map' style='width: 350px; height: 350px;'></div>
        </div>
        <form th:action="@{r/{id}/delete (id = ${reservation.id})}" method="POST">
            <button type="submit" class="btn btn-danger">Cancel Reservation</button>
        </form>
    </div>
</div>
<script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<script src='../../static/js/keys.js'></script>
<script>
    // Mapbox API - Exercise 2
    mapboxgl.accessToken = "pk.eyJ1IjoibWlhbWlqYTciLCJhIjoiY2w3ejBmazd2MTFqMTNycDdpanFxb2RycCJ9.vdXYFQybqjp0FrkRw5Zfkw";
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/light-v10', // style URL
        center: [-97.3301, 37.6872], // starting position [lng, lat]
        zoom: 10, // starting zoom
        projection: 'globe' // display the map as a 3D globe
    });

    map.on('style.load', () => {
        map.setFog({}); // Set the default atmosphere style
    });

    // Mapbox API - Exercise 3
    map.addControl(
        new MapboxGeocoder({
            accessToken: mapboxgl.accessToken,
            mapboxgl: mapboxgl
        })
    );
</script>
</body>
</html>
